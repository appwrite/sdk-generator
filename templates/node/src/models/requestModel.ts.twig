{%~ set importedEnums = [] %}
{%~ set importedSchemas = [] %}
{%~ for property in requestModel.properties %}
{%~ if property.enum and property.enumName not in importedEnums %}
import { {{ property.enumName | caseUcfirst }} } from '../enums/{{ property.enumName | caseKebab }}';
{%~ set importedEnums = importedEnums | merge([property.enumName]) %}
{%~ endif %}
{%~ if property.sub_schema and property.sub_schema not in importedSchemas %}
import { {{ property.sub_schema | caseUcfirst }}, {{ property.sub_schema | caseCamel }}ToMap } from './{{ property.sub_schema | caseKebab }}';
{%~ set importedSchemas = importedSchemas | merge([property.sub_schema]) %}
{%~ endif %}
{%~ endfor %}

/**
 * {{ requestModel.description }}
 */
export interface {{ requestModel.name | caseUcfirst }} {
    {%~ for property in requestModel.properties %}
    /**
     * {{ property.description }}
     */
    {{ property.name | escapeKeyword }}{% if not property.required %}?{% endif %}: {{ property | getPropertyType(spec) }};
    {%~ endfor %}
}

/**
 * Helper function to convert {{ requestModel.name | caseUcfirst }} to a plain object
 */
export function {{ requestModel.name | caseCamel }}ToMap(model: {{ requestModel.name | caseUcfirst }}): Record<string, unknown> {
    return {
        {%~ for property in requestModel.properties %}
        '{{ property.name }}': {% if property.sub_schema %}{% if property.type == 'array' %}model.{{ property.name | escapeKeyword }}{% if not property.required %}?{% endif %}.map(item => {{ property.sub_schema | caseCamel }}ToMap(item)){% else %}model.{{ property.name | escapeKeyword }} ? {{ property.sub_schema | caseCamel }}ToMap(model.{{ property.name | escapeKeyword }}) : undefined{% endif %}{% elseif property.enum %}model.{{ property.name | escapeKeyword }}{% else %}model.{{ property.name | escapeKeyword }}{% endif %},
        {%~ endfor %}
    };
}
