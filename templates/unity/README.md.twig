# {{ spec.title }} {{ sdk.name }} SDK

![License](https://img.shields.io/github/license/{{ sdk.gitUserName|url_encode }}/{{ sdk.gitRepoName|url_encode }}.svg?style=flat-square)
![Version](https://img.shields.io/badge/api%20version-{{ spec.version|url_encode }}-blue.svg?style=flat-square)
![Unity](https://img.shields.io/badge/Unity-2021.3%2B-blue.svg)
[![Build Status](https://img.shields.io/travis/com/appwrite/sdk-generator?style=flat-square)](https://travis-ci.com/appwrite/sdk-generator)
{% if sdk.twitterHandle %}
[![Twitter Account](https://img.shields.io/twitter/follow/{{ sdk.twitterHandle }}?color=00acee&label=twitter&style=flat-square)](https://twitter.com/{{ sdk.twitterHandle }})
{% endif %}
{% if sdk.discordChannel %}
[![Discord](https://img.shields.io/discord/{{ sdk.discordChannel }}?label=discord&style=flat-square)]({{ sdk.discordUrl }})
{% endif %}
{% if sdk.warning %}

{{ sdk.warning|raw }}
{% endif %}

{{ sdk.description }}

{% if sdk.logo %}
![{{ spec.title }}]({{ sdk.logo }})
{% endif %}

## Installation

### Unity Package Manager (UPM)

1. Open Unity and go to **Window > Package Manager**
2. Click the **+** button and select **Add package from git URL**
3. Enter the following URL: 
```
https://github.com/{{ sdk.gitUserName|url_encode }}/{{ sdk.gitRepoName|url_encode }}.git?path=Assets
```
4. Click **Add**
5. In Unity, open the **Appwrite → Setup Assistant** menu and install the required dependencies
![](./.media/setup-assistant.png)
### Manual Installation

1. Download the latest release from [GitHub](/releases) or zip
2. Import the Unity package into your project
3. In Unity, open the **Appwrite → Setup Assistant** menu and install the required dependencies

## Dependencies


This SDK requires the following Unity packages and libraries:

- [**UniTask**](https://github.com/Cysharp/UniTask): For async/await support in Unity
- [**NativeWebSocket**](https://github.com/endel/NativeWebSocket): For WebSocket real-time subscriptions
- **System.Text.Json**: For JSON serialization (provided as a DLL in the project)

You can also install UniTask and other required dependencies automatically via **Appwrite → Setup Assistant** in Unity.

## Quick Start
> **Before you begin**  
> First, create an Appwrite configuration:  
> — via the **QuickStart** window in the **Appwrite Setup Assistant**  
> — or through the menu **Appwrite → Create Configuration**
![](./.media/config.png)

### Example: Unity Integration - Using AppwriteManager

```csharp
    [SerializeField] private AppwriteConfig config;
    private AppwriteManager _manager;

    private async UniTask ExampleWithManager()
    {
        // Get or create manager
        _manager = AppwriteManager.Instance ?? new GameObject("AppwriteManager").AddComponent<AppwriteManager>();
        _manager.SetConfig(config);

        // Initialize
        var success = await _manager.Initialize();
        if (!success) { Debug.LogError("Failed to initialize AppwriteManager"); return; }

        // Direct client access
        var client = _manager.Client;
        var pingResult = await client.Ping();
        Debug.Log($"Ping result: {pingResult}");

        // Service creation through DI container
        var account = _manager.GetService<Account>();
        var databases = _manager.GetService<Databases>();
                
        // Realtime example
        var realtime = _manager.Realtime;
        var subscription = realtime.Subscribe(
            new[] { "databases.*.collections.*.documents" },
            response => Debug.Log($"Realtime event: {response.Events[0]}")
        );
    }
```

### Example: Unity Integration - Using Client directly

```csharp
    [SerializeField] private AppwriteConfig config;

    private async UniTask ExampleWithDirectClient()
    {
        // Create and configure client
        var client = new Client()
            .SetEndpoint(config.Endpoint)
            .SetProject(config.ProjectId);
                    
        if (!string.IsNullOrEmpty(config.ApiKey))
            client.SetKey(config.ApiKey);
                    
        if (!string.IsNullOrEmpty(config.RealtimeEndpoint))
            client.SetEndPointRealtime(config.RealtimeEndpoint);
                
        // Test connection
        var pingResult = await client.Ping();
        Debug.Log($"Direct client ping: {pingResult}");
                
        // Create services manually
        var account = new Account(client);
        var databases = new Databases(client);
                
        // Realtime example
        // You need to create a Realtime instance manually or attach dependently
        realtime.Initialize(client);
        var subscription = realtime.Subscribe(
            new[] { "databases.*.collections.*.documents" },
            response => Debug.Log($"Realtime event: {response.Events[0]}")
        );
    }
```
### Error Handling
```csharp
try
{
    var result = await client..Async();
}
catch (AppwriteException ex)
{
    Debug.LogError($"Appwrite Error: {ex.Message}");
    Debug.LogError($"Status Code: {ex.Code}");
    Debug.LogError($"Response: {ex.Response}");
}
```

## Preparing Models for Databases API

When working with the Databases API in Unity, models should be prepared for serialization using the System.Text.Json library. By default, System.Text.Json converts property names from PascalCase to camelCase when serializing to JSON. If your Appwrite collection attributes are not in camelCase, this can cause errors due to mismatches between serialized property names and actual attribute names in your collection.

To avoid this, add the `JsonPropertyName` attribute to each property in your model class to match the attribute name in Appwrite:

```csharp
using System.Text.Json.Serialization;

public class TestModel
{
    [JsonPropertyName("name")]
    public string Name { get; set; }

    [JsonPropertyName("release_date")]
    public System.DateTime ReleaseDate { get; set; }
}
```

The `JsonPropertyName` attribute ensures your data object is serialized with the correct attribute names for Appwrite databases. This approach works seamlessly in Unity with the included System.Text.Json DLL.

## Contribution

This library is auto-generated by the Appwrite [SDK Generator](https://github.com/appwrite/sdk-generator). To learn how you can help improve this SDK, please check the [contribution guide](https://github.com/appwrite/sdk-generator/blob/master/CONTRIBUTING.md) before sending a pull request.

## License

Please see the [{{spec.licenseName}} license]({{spec.licenseURL}}) file for more information.

## Changelog

Please see [CHANGELOG](CHANGELOG.md) for more information about recent changes.

