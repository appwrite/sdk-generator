import {{ sdk.namespace | caseDot }}.Client
import {{ sdk.namespace | caseDot }}.coroutines.CoroutineCallback
{% if method.parameters.all | filter((param) => param.type == 'file') | length > 0 %}
import {{ sdk.namespace | caseDot }}.models.InputFile
{% endif %}
import {{ sdk.namespace | caseDot }}.services.{{ service.name | caseUcfirst }}
{% set added = [] %}
{% for parameter in method.parameters.all %}
{% if parameter.enumValues is not empty %}
{% if parameter.enumName not in added %}
import {{ sdk.namespace | caseDot }}.enums.{{ parameter.enumName | caseUcfirst }}
{% set added = added|merge([parameter.enumName]) %}
{% endif %}
{% endif %}
{% endfor %}
{% if method.parameters.all | hasPermissionParam %}
import {{ sdk.namespace | caseDot }}.Permission
import {{ sdk.namespace | caseDot }}.Role
{% endif %}

val client = Client(context)
    {%~ if method.auth|length > 0 %}
    .setEndpoint("{{ spec.endpointDocs | raw }}") // Your API Endpoint
    {%~ for node in method.auth %}
    {%~ for key,header in node|keys %}
    .set{{header | caseUcfirst}}("{{node[header]['x-appwrite']['demo'] | raw }}") // {{node[header].description}}
    {%~ endfor %}
    {%~ endfor %}
    {%~ endif %}

val {{ service.name | caseCamel }} = {{ service.name | caseUcfirst }}(client)

{% if method.type == 'webAuth' %}
{% else %}
val result = {% endif %}{{ service.name | caseCamel }}.{{ method.name | caseCamel }}({% if method.parameters.all | length == 0 %}){% endif %}

    {%~ for parameter in method.parameters.all %}
    {%~ if parameter.enumValues is not empty %}
    {{ parameter.name }} = {{ parameter.enumName }}.{{ (parameter.enumKeys[0] ?? parameter.enumValues[0]) | caseEnumKey }},{% if not parameter.required %} // (optional){% endif %}
    {%~ else %}
    {{ parameter.name }} = {{ parameter | paramExample }}, {% if not parameter.required %}// (optional){% endif %}
    {%~ endif %}

    {%~ endfor %}
{% if method.parameters.all | length > 0  %}){% endif %}
