{% set lang = 'android' %}
{% set langName = 'Android' %}
{{ include('agent-skills/base/frontmatter.md.twig') }}

# {{ spec.title }} {{ langName }} SDK

{{ spec.title }}'s {{ langName }} SDK for native Android apps written in Kotlin. Provides client-side access to {{ spec.title }} services including authentication (email, OAuth with Activity integration), databases, storage, and real-time subscriptions â€” with coroutine support and named parameter syntax.

## When to Apply

Reference this skill when:

- Building a native Android app in Kotlin with {{ spec.title }}
- Adding user authentication (email/password, OAuth with Activity) to an Android app
- Performing CRUD operations on {{ spec.title }} databases from an Android client
- Uploading files from device storage or camera
- Subscribing to real-time row changes for live UI updates
- Using coroutines for async {{ spec.title }} API calls

## Setting Up the Client

```kotlin
import io.{{ spec.title | caseLower }}.Client
import io.{{ spec.title | caseLower }}.ID
import io.{{ spec.title | caseLower }}.Query
import io.{{ spec.title | caseLower }}.services.Account
import io.{{ spec.title | caseLower }}.services.TablesDB
import io.{{ spec.title | caseLower }}.services.Storage

val client = Client(context)
    .setEndpoint("{{ spec.endpoint }}")
    .setProject("[PROJECT_ID]")
```

## Code Examples

### Authentication

```kotlin
val account = Account(client)

// Signup
account.create(
    userId = ID.unique(),
    email = "user@example.com",
    password = "password123",
    name = "User Name"
)

// Login
val session = account.createEmailPasswordSession(
    email = "user@example.com",
    password = "password123"
)

// OAuth
account.createOAuth2Session(activity = activity, provider = OAuthProvider.GOOGLE)

// Get current user
val user = account.get()

// Logout
account.deleteSession(sessionId = "current")
```

### Database Operations

> **Note:** Use `TablesDB` (not the deprecated `Databases` class) for all new code. Only use `Databases` if the existing codebase already relies on it or the user explicitly requests it.

```kotlin
val tablesDB = TablesDB(client)

// Create row
val doc = tablesDB.createRow(
    databaseId = "[DATABASE_ID]",
    tableId = "[TABLE_ID]",
    rowId = ID.unique(),
    data = mapOf("title" to "Hello", "done" to false)
)

// Query rows
val results = tablesDB.listRows(
    databaseId = "[DATABASE_ID]",
    tableId = "[TABLE_ID]",
    queries = listOf(Query.equal("done", false), Query.limit(10))
)

// Update row
tablesDB.updateRow(
    databaseId = "[DATABASE_ID]",
    tableId = "[TABLE_ID]",
    rowId = "[ROW_ID]",
    data = mapOf("done" to true)
)

// Delete row
tablesDB.deleteRow(
    databaseId = "[DATABASE_ID]",
    tableId = "[TABLE_ID]",
    rowId = "[ROW_ID]"
)
```

### File Storage

```kotlin
val storage = Storage(client)

// Upload file
val file = storage.createFile(
    bucketId = "[BUCKET_ID]",
    fileId = ID.unique(),
    file = InputFile.fromFile(File("/path/to/file.png"))
)

// Get file preview
val preview = storage.getFilePreview(
    bucketId = "[BUCKET_ID]",
    fileId = "[FILE_ID]",
    width = 300,
    height = 300
)

// Delete file
storage.deleteFile(bucketId = "[BUCKET_ID]", fileId = "[FILE_ID]")
```

### Real-time Subscriptions

```kotlin
val realtime = Realtime(client)

val subscription = realtime.subscribe("databases.[DATABASE_ID].tables.[TABLE_ID].rows") { response ->
    println(response.payload)
}

// Cleanup
subscription.close()
```

