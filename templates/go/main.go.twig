package main

import (
	"log"
	"os"
	"time"

	"github.com/appwrite/sdk-for-go/appwrite"
)

func main() {
	client := appwrite.NewClient(10 * time.Second)
	client.SetEndpoint(os.Getenv("APPWRITE_ENDPOINT"))
	client.SetProject(os.Getenv("APPWRITE_PROJECT"))
	client.SetKey(os.Getenv("APPWRITE_API_KEY"))

	db := appwrite.NewDatabase(client)
	data := map[string]string{
		"hello": "world",
	}
	var EmptyArray = []interface{}{}
	doc, err := db.CreateDocument(
		os.Getenv("COLLECTION_ID"),
		data,
		EmptyArray,
		EmptyArray,
		"",
		"",
		"",
	)
	if err != nil {
		log.Printf("Error creating document: %v", err)
	}
	log.Printf("Created document: %v", doc)
}
