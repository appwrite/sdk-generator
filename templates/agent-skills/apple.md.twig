{% set lang = 'apple' %}
{% set langName = 'Apple' %}
{{ include('agent-skills/base/frontmatter.md.twig') }}

# {{ spec.title }} {{ langName }} SDK

{{ spec.title }}'s {{ langName }} SDK for native iOS, macOS, watchOS, and tvOS apps written in Swift. Provides client-side access to {{ spec.title }} services including authentication (email, OAuth), databases, storage, and real-time subscriptions â€” with async/await support and Swift labeled arguments.

## When to Apply

Reference this skill when:

- Building a native iOS, macOS, watchOS, or tvOS app in Swift with {{ spec.title }}
- Adding user authentication (email/password, OAuth) to an Apple platform app
- Performing CRUD operations on {{ spec.title }} databases from a Swift client
- Uploading or downloading files from device storage
- Subscribing to real-time row changes for live UI updates
- Using async/await for {{ spec.title }} API calls in Swift

## Setting Up the Client

```swift
import {{ spec.title }}

let client = Client()
    .setEndpoint("{{ spec.endpoint }}")
    .setProject("[PROJECT_ID]")
```

## Code Examples

### Authentication

```swift
let account = Account(client)

// Signup
let user = try await account.create(userId: ID.unique(), email: "user@example.com", password: "password123", name: "User Name")

// Login
let session = try await account.createEmailPasswordSession(email: "user@example.com", password: "password123")

// OAuth
try await account.createOAuth2Session(provider: .google)

// Get current user
let me = try await account.get()

// Logout
try await account.deleteSession(sessionId: "current")
```

### Database Operations

> **Note:** Use `TablesDB` (not the deprecated `Databases` class) for all new code. Only use `Databases` if the existing codebase already relies on it or the user explicitly requests it.

```swift
let tablesDB = TablesDB(client)

// Create row
let doc = try await tablesDB.createRow(databaseId: "[DATABASE_ID]", tableId: "[TABLE_ID]", rowId: ID.unique(), data: [
    "title": "Hello",
    "done": false
])

// Query rows
let results = try await tablesDB.listRows(databaseId: "[DATABASE_ID]", tableId: "[TABLE_ID]", queries: [
    Query.equal("done", value: false),
    Query.limit(10)
])

// Update row
try await tablesDB.updateRow(databaseId: "[DATABASE_ID]", tableId: "[TABLE_ID]", rowId: "[ROW_ID]", data: ["done": true])

// Delete row
try await tablesDB.deleteRow(databaseId: "[DATABASE_ID]", tableId: "[TABLE_ID]", rowId: "[ROW_ID]")
```

### File Storage

```swift
let storage = Storage(client)

// Upload file
let file = try await storage.createFile(bucketId: "[BUCKET_ID]", fileId: ID.unique(), file: InputFile.fromPath("/path/to/file.png"))

// Delete file
try await storage.deleteFile(bucketId: "[BUCKET_ID]", fileId: "[FILE_ID]")
```

### Real-time Subscriptions

```swift
let realtime = Realtime(client)

let subscription = realtime.subscribe(channels: ["databases.[DATABASE_ID].tables.[TABLE_ID].rows"]) { response in
    print(response.payload)
}

// Cleanup
subscription.close()
```

